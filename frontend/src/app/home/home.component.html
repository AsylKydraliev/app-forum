<div fxLayoutAlign="center center">
  <mat-progress-spinner
    *ngIf="loading | async else postsArea" mode="indeterminate"
  ></mat-progress-spinner>
</div>

<ng-template #postsArea>
  <div class="content" fxLayout="column">
    <mat-card
      class="example-card"
      *ngFor="let post of posts | async"
      fxLayoutAlign="start"
    >
      <img
        *ngIf="post.image"
        mat-card-md-image
        [src]="apiUrl + '/uploads/' + post.image"
        alt="{{ post.title }}"
      >
      <p *ngIf="!post.image" style="margin: 25px">No image</p>
      <div>
        <mat-card-title-group>
          <mat-card-subtitle>{{ post.date }}</mat-card-subtitle>
          <span>by {{ post.user.name }}</span>
        </mat-card-title-group>
        <mat-card-content>
          <mat-card-title [routerLink]="['post/' + post._id]">{{ post.title }}</mat-card-title>
        </mat-card-content>
      </div>
    </mat-card>
  </div>
</ng-template>
